@using Microsoft.AspNetCore.Mvc.TagHelpers
@using SnitzCore.Data
@model Snitz.PhotoAlbum.ViewModels.AlbumUploadViewModel
@inject IMember MemberService
@{
    var consolidated = SnitzConfig.IsEnabled("INTCOMMONALBUM");
}
<p class="mb-3">
    @Localizer["maxFileSize", Model.MaxSize]<br />
    @Localizer["allowedFiles", Model.AllowedTypes]
</p>
<form action="@SnitzConfig.RootFolder/PhotoAlbum/Upload/" class="needs-validation" method="post" enctype="multipart/form-data" role="form" id="upload-form" novalidate>
    <div class="mb-3">
        <label asp-for="CommonName" class="form-label">@Localizer["lblLocalName"]</label>
        <input asp-for="CommonName" class="form-control" maxlength="50" required />
        <span class="invalid-feedback">@Localizer["lblLocalName"] is required</span>
    </div>    
    <div class="mb-3">
        <label asp-for="Description" class="form-label">@Localizer["lblDescription"]</label>
            <textarea asp-for="Description" class="form-control" maxlength="50" rows="2" ></textarea>
            <span asp-validation-for="Description"></span>
    </div>
    @await Component.InvokeAsync("ImageAlbum", new { template = "Categories", memberid = MemberService.Current()?.Id })
    @if ((bool)ViewBag.ShowAll && consolidated)
    {
        <div class="mb-3">
            <label asp-for="ScientificName" class="form-label">@Localizer["lblScientificName"]</label>
            <input asp-for="ScientificName" class="form-control" maxlength="50" />
            <span asp-validation-for="ScientificName"></span>
        </div>
        <div class="mb-3">
            <label class="form-label" for="Group">@Localizer["lblGroup"]</label>
            <select id="Group" name="Group" class="form-select">
                <option value="">Please Select</option>
                @foreach (var item in Model.GroupList)
                {
                    <option value="@item.Value">@item.Text</option>
                }
            </select>
        </div>
    }
    @if (!(bool)ViewBag.ShowAll)
    {
        <div class="form-check form-switch">
            @Html.CheckBoxFor(m => m.ShowCaption, new { @class = "form-check-input" })
            <label class="form-check-label" for="ShowCaption">
                @Localizer["lblShowCaption"]
            </label>
        </div>
    }

    <div class="form-check form-switch">
        @Html.CheckBoxFor(m => m.Private, new { @class = "form-check-input" })
        <label class="form-check-label" for="Private">
            @Localizer["lblPrivate"]
        </label>
    </div>
    <div class="form-check form-switch mb-3">
        @Html.CheckBoxFor(m => m.NotFeatured, new { @class = "form-check-input" })
        <label class="form-check-label" for="NotFeatured">
            @Localizer["lblDoNotFeature"]
        </label>
    </div>
    <div class="photo-input row mb-3">
        <input asp-for="AlbumImage" class="form-control" accept="@Model.AllowedTypes" />
        <div class="invalid-feedback">
            Please choose a file.
        </div>
    </div>

</form>
