@using MVCForum.TagHelpers
@using BbCodeFormatter
@using MVCForum.Models
@using SnitzCore.Data.Interfaces
@model MVCForum.Models.Post.PostListingModel
@inject ICodeProcessor BbCodeProcessor
@inject ISnitzConfig SnitzConfig
@{
    Layout = null;
}
<div class="table-row">
    <div class="status" data-status="@Model.Status">
        <snitz-topic-icon status="@Model.Status" replies="@Model.RepliesCount" views="@Model.ViewCount" lastpost="@Model.LastPostDate"></snitz-topic-icon>
    </div>
    <div class="subjects">
        <a href="/Topic/@Model.Id">@Html.Raw(BbCodeProcessor.Subject(Model.Title!))</a>
        <br>
        <span>@Localizer["Started"] @Localizer["lblPostedBy"] @Model.AuthorName <snitz-datetime datetime="@Model.Created"></snitz-datetime> .</span>
        @if (SnitzConfig.GetIntValue("STRSHOWPAGING") == 1)
        {
            @if (Model.RepliesCount > ViewBag.PageSize)
            {
                var paging = new PagingModel
                {
                        PageCount = Model.RepliesCount / ViewBag.PageSize ,
                        Page = Model.Id
                };
                <partial name="QuickPaging" model="paging"/>
            }
        }
    </div>
    <div class="replies">
        @Model.RepliesCount @Localizer["lblReplies"] <br/> @Model.ViewCount @Localizer["lblViews"]
    </div>
    <div class="last-reply">
        <snitz-datetime datetime="@Model.LastPostDate"></snitz-datetime>
        @if (SnitzConfig.GetIntValue("STRJUMPLASTPOST") == 1 && Model.LastPostDate != null)
        {
            <span class=""><br />By <b><a href="">@Model.LastPostAuthorName</a></b></span>
        }
    </div>
</div>
