if($(".cal-dates").length>=1){$("#cal-recur").val()=="EveryDay"&&$("#cal-dow").show();$(document).on("change","#cal-recur",function(){$(this).val()=="EveryDay"?$("#cal-dow").show():$("#cal-dow").hide()})}$(document).on("change","#countryRegion",function(){var n=$("#change-holidays").val()+"|"+$(this).val(),t;console.log("change "+n);t=SnitzVars.baseUrl+"/Calendar/GetHolidays/";FullCalendarNew(t,"calendar","",n)});$("#change-holidays").on("change",function(){var n=$(this).val(),t;populateRegions(n);localStorage.setItem("pubCountry",n);t=SnitzVars.baseUrl+"/Calendar/GetHolidays/";FullCalendarNew(t,"calendar","",n)});UpComingCalendar=function(n,t){var r=document.getElementById(t),i;let u=localStorage.getItem("pubCountry");i=new FullCalendar.Calendar(r,{initialView:"upcomingListView",locale:SnitzVars.forumlang,views:{upcomingListView:{type:"list",visibleRange:function(n){var t=new Date(n.valueOf()),i=new Date(n.valueOf());return t.setDate(t.getDate()-1),i.setDate(i.getDate()+28),{start:t,end:i}},buttonText:"Custom List"}},height:400,eventSources:[{url:n},{url:SnitzVars.baseUrl+"/Calendar/GetHolidays/?country="+u},{url:SnitzVars.baseUrl+"/Calendar/GetBirthDays"}],loading:function(n){n?($("#calendar-list").css({visibility:"hidden"}),$("#calendar-list").css({height:"0px"}),$("#upcoming-events").show()):($("#calendar-list").css({visibility:"visible"}),$("#cal-loading i").hide(),$("#cal-loading").hide(),$("#calendar-list").css({height:"auto"}))}});i.render()};ClubCalendar=function(n,t,i){var f=new Date,e=f.getDate(),r=f.getMonth()+1,o=f.getFullYear(),s=52,u;i.length>1&&(s=calcWeeks(i));u="upComing";i.length>1&&(u="disContinued");u==="disContinued"&&(console.log(u),r=r-12,r<0&&(r=12+r,o=o-1));var h=""+o+"-"+(r<=9?"0"+r:r)+"-"+(e<=9?"0"+e:e),c=document.getElementById(t),l=new FullCalendar.Calendar(c,{headerToolbar:{left:"",center:"title",right:""},views:{upComing:{type:"list",duration:{months:2}},disContinued:{type:"list",duration:{months:6}}},eventDidMount:function(n){var r=document.createElement("div"),u,t,i;r.classList.add("custom-field");r.innerHTML="<strong>Club:<\/strong> "+(n.event.extendedProps.clublong||"N/A")+"<br><strong>Location:<\/strong> "+(n.event.extendedProps.location.name||"N/A")+"<p> "+(n.event.extendedProps.details||"N/A")+"<\/p>";n.el.querySelector(".fc-list-event-title").appendChild(r);u=document.createElement("div");u.innerHTML=n.event.extendedProps.club||"N/A";n.el.querySelector(".fc-list-event-time").appendChild(u);SnitzVars.isAdmin&&(t=document.createElement("i"),t.classList.add("fa"),t.classList.add("fa-trash-can"),t.setAttribute("data-id",n.event.id),i=document.createElement("i"),i.classList.add("fa"),i.classList.add("fa-pencil"),i.setAttribute("data-id",n.event.id),n.el.querySelector(".fc-list-event-time").appendChild(t),n.el.querySelector(".fc-list-event-time").appendChild(i))},initialView:u,initialDate:h,eventSources:[n],navLinks:!1,editable:!1});l.render();$(".my-fc-list>span").is(":empty")&&$(".my-fc-list>span").html("No Events")};calcWeeks=function(n){var t=new Date(n),i=new Date;return(i-t)/6048e5.toFixed(2)};$(document).on("click",".fc-list-event-time .fa-trash-can",function(n){n.preventDefault();var t=$(this).data("id"),i=SnitzVars.baseUrl+"/Events/DeleteEvent/"+t;(async()=>{const n=await b_confirm("Delete this event");n&&$.get(i,function(){window.location.reload()})})()});$(document).on("click",".fc-list-event-time .fa-pencil",function(n){n.preventDefault();var t=$(this).data("id");location.href=SnitzVars.baseUrl+"/Events/AddEditEvent/"+t});postEvent=function(n,t){if($("#startdate").val()==="")return location.reload(t[1]),!1;$("#cal-topicid").val(t[0]);var i=$("#cal-addTopicEvent").serialize();n.preventDefault();$.ajax({type:"POST",url:SnitzVars.baseUrl+"/Calendar/SaveEvent",data:i,dataType:"json",success:function(n){if(n.success)return BootstrapDialog.alert({title:"Event Info ",message:n.responseText}),location.href=t[1],!1},error:function(n){return appendAlert(n.responseText,"warning"),location.href=t[1],!1}})};setForumEventsAuth=function(n){var t=$("#cal-forumAuth").serialize();n.preventDefault();$.ajax({type:"POST",url:SnitzVars.baseUrl+"/Calendar/SaveForum",data:t,dataType:"json",success:function(n){if(n.success)return appendAlert(n.responseText,"info"),location.reload(),!1},error:function(n){appendAlert(n,"danger")}})};FullCalendarNew=function(n,t,i,r){var u=document.getElementById("calendar"),n=SnitzVars.baseUrl+"/Calendar/GetCalendarEvents/",f=SnitzVars.baseUrl+"/Calendar/GetHolidays/?country="+r,e=SnitzVars.baseUrl+"/Events/GetClubCalendarEvents/-1?old=0&calendar=1",o=SnitzVars.baseUrl+"/Calendar/GetBirthDays",s=new FullCalendar.Calendar(u,{headerToolbar:{left:"prev,next today",center:"title",right:"multiMonthYear,dayGridMonth,timeGridWeek"},firstDay:i,locale:SnitzVars.forumlang,editable:!0,selectable:!0,dayMaxEvents:!0,eventSources:[{url:n},{url:e},{url:f},{url:o}]});s.render()};