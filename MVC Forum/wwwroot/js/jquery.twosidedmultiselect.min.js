(function(n){function f(i){n("#"+i).on("dblclick",function(){return n(this).children(":selected").remove().appendTo("#"+i+t),n("#"+i+t+" options").removeAttr("selected"),r(),!1});n("#"+i+t).on("dblclick",function(){return n(this).children(":selected").remove().appendTo("#"+i),n("#"+i+t+" options").removeAttr("selected"),r(),!1})}function r(){window.clearTimeout(u);u=window.setTimeout(e,500)}function e(){for(var r=0;r<i.length;r++)n("#"+i[r]+t+" option").twosidedmultiselectsort(function(t,i){return parseInt(n(t).attr("rel"),10)>parseInt(n(i).attr("rel"),10)?1:-1}),n("#"+i[r]+" option").twosidedmultiselectsort(function(t,i){return parseInt(n(t).attr("rel"),10)>parseInt(n(i).attr("rel"),10)?1:-1});n("."+t+"select").each(function(){var t=n(this).html();n(this).html(t)})}var i=[],t="tsms",u;n.fn.twosidedmultiselect=function(){return this.each(function(){var u,a,h,o,v;$This=n(this);var y="",e="",s="",l="",c="";for(n("form").submit(function(){for(var t=0;t<i.length;t++)n("#"+i[t]+" option").attr("selected","selected")}),y=$This.attr("id"),e=$This.attr("name"),e.indexOf("[]")>-1&&(l="[]",e=e.replace("[]","")),s=$This.attr("class"),s.length>0&&(s=s+" "),u=e.replace(/:/g,"-").replace(/\./g,"-"),c=u+t,a=$This.attr("size"),i[i.length]=u,h=$This.children("option"),o=0;o<h.length;o++)n(h[o]).attr("rel",o),n(h[o]).attr("title",h[o].text.replace(/"/g,"").replace(/\'/g,""));$This.attr("id",c).attr("name",c);v='<div class="'+t+"options col-2 btn-group-vertical\"><button type='button' rel=\""+u+"\" title=\"Add Selected\" class='AddOne btn btn-secondary'><i class='fa fa-angle-right'><\/i><\/button><button type='button' rel=\""+u+"\" title=\"Add All\" class='AddAll btn btn-secondary'><i class='fa fa-angle-double-right'><\/i><\/button><button type='button' rel=\""+u+"\" title=\"Remove Selected\" class='RemoveOne btn btn-secondary'><i class='fa fa-angle-left'><\/i><\/button><button type='button' rel=\""+u+"\" title=\"Remove All\" class='RemoveAll btn btn-secondary'><i class='fa fa-angle-double-left'><\/i><\/button><\/div><div class=\""+t+'select col-5"><select name="'+e+l+'" id="'+u+'" size="'+a+'"multiple="multiple" size="8" class="'+s+'TakeOver"><\/select><\/div>';$This.after(v);$This.wrap('<div class="'+t+'select col-5" />');n("#"+c+" option:selected").remove().appendTo("#"+u);f(e);n("."+t+"options .AddOne").click(function(){var i=n(this).attr("rel");return n("#"+i+t+" option:selected").remove().appendTo("#"+i),r(),!1});n("."+t+"options .AddAll").click(function(){var i=n(this).attr("rel");return n("#"+i+t+" option").remove().appendTo("#"+i),r(),!1});n("."+t+"options .RemoveOne").click(function(){var i=n(this).attr("rel");return n("#"+i+" option:selected").remove().appendTo("#"+i+t),r(),!1});n("."+t+"options .RemoveAll").click(function(){var i=n(this).attr("rel");return n("#"+i+" option").remove().appendTo("#"+i+t),r(),!1})})};n.fn.twosidedmultiselectsort=function(){var n=[].sort;return function(t,i){i=i||function(){return this};var r=this.map(function(){var t=i.call(this),n=t.parentNode,r=n.insertBefore(document.createTextNode(""),t.nextSibling);return function(){n===this||(n.insertBefore(this,r),n.removeChild(r))}});return n.call(this,t).each(function(n){r[n].call(i.call(this))})}}()})(jQuery);