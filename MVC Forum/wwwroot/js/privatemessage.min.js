function revalidate(){var t=document.getElementById("pm-message"),n=t.getElementsByTagName("form"),i=n[n.length-1];$.validator.unobtrusive.parse(i)}$('[class^="pmread_"]').on("click",function(n){n.preventDefault();$("#pm-message").load(SnitzVars.baseUrl+"/PrivateMessage/Read/"+$(this).data("id"),function(){$("#msg-list").hide();$("#pm-message").show()})});$(".pm-settings").on("click",function(n){n.preventDefault();$(".btn").removeClass("active");$(this).addClass("active");$(".pm-delete").attr("disabled",!0);$("#pm-message").load(SnitzVars.baseUrl+"/PrivateMessage/Settings/",function(){$(".btn-success").focus();$("#msg-list").hide()})});$(".pm-message").on("click",function(n){n.preventDefault();$(".btn").removeClass("active");$(this).addClass("active");$(".pm-delete").attr("disabled",!0);$("#pm-message").load(SnitzVars.baseUrl+"/PrivateMessage/Create/",function(){ValidateForms();revalidate();$("#To").focus();$("#msg-list").hide()})});$("#select_all").on("change",function(){var n=$(this).closest("form").find(":checkbox");n.prop("checked",$(this).is(":checked"))});$(".pm-delete").on("click",function(n){if($(this).attr("disabled"))return n.preventDefault(),!1;$(this).data("id")?(async()=>{const n=await b_confirm("delete this Message ");n&&$.post(SnitzVars.baseUrl+"/PrivateMessage/Delete",{pmid:$(this).data("id"),userid:$(this).data("user")},function(n){n.success?(appendAlert(n.responseText,"success"),setTimeout(function(){$("#alertmessage .btn-close").click();location.reload(!0)},3e3)):appendAlert(n.responseText,"warning")})})():(async()=>{const n=await b_confirm("delete selected messages ");n&&$.post(SnitzVars.baseUrl+"/PrivateMessage/DeleteMany",$("#pm-form").serialize(),function(n){n.success?(appendAlert(n.responseText,"success"),setTimeout(function(){$("#alertmessage .btn-close").click();location.reload(!0)},3e3)):appendAlert(n.responseText,"warning")})})()});$(".fa-trash").on("click",function(){$(this).data("id")?(async()=>{const n=await b_confirm("delete this messages ");n&&$.post(SnitzVars.baseUrl+"/PrivateMessage/Delete",{pmid:$(this).data("id"),userid:$(this).data("user")},function(n){n.success?(appendAlert(n.responseText,"info"),setTimeout(function(){$("#alertmessage .btn-close").click();location.reload(!0)},3e3)):appendAlert(n.responseText,"warning")})})():(async()=>{const n=await b_confirm("delete selected messages ");n&&$.post(SnitzVars.baseUrl+"/PrivateMessage/DeleteMany",$("#pm-form").closest("form").serialize(),function(n){n.success?(appendAlert(n.responseText,"info"),setTimeout(function(){$("#alertmessage .btn-close").click();location.reload(!0)},3e3)):appendAlert(n.responseText,"warning")})})()});$("#pm-find").on("click",function(){$(".btn").removeClass("active");$(this).addClass("active");$(".pm-delete").attr("disabled",!0);$.post(SnitzVars.baseUrl+"/PrivateMessage/Search",$(this).closest("form").serialize(),function(n){n?($("#msg-list").show(),$("#msg-list").html(n),$("#pm-message").hide(),$(".pm-delete").attr("disabled",!1)):appendAlert(n,"warning")})});$("body").on("click",".fa-reply",function(n){return $("#pm-message").load(SnitzVars.baseUrl+"/PrivateMessage/Reply/"+$(this).data("id"),function(){ValidateForms();revalidate();$("#msg-list").hide()}),n.stopPropagation(),!1});$("body").on("click",".fa-share",function(n){return $("#pm-message").load(SnitzVars.baseUrl+"/PrivateMessage/Forward/"+$(this).data("id"),function(){ValidateForms();revalidate();$("#msg-list").hide()}),n.stopPropagation(),!1});$(".fa-envelope").on("click",function(n){return $.get(SnitzVars.baseUrl+"/PrivateMessage/MarkRead/?id="+$(this).data("id")+"&val=1",function(){location.reload()}),n.stopPropagation(),!1});$(".fa-envelope-open").on("click",function(n){return $.get(SnitzVars.baseUrl+"/PrivateMessage/MarkRead/?id="+$(this).data("id")+"&val=0",function(){location.reload()}),n.stopPropagation(),!1});$(".pm-search").on("click",function(n){return $(".btn").removeClass("active"),$(this).addClass("active"),$(".pm-delete").attr("disabled",!0),$("#pm-message").load(SnitzVars.baseUrl+"/PrivateMessage/SearchMessages/"+$(this).data("id"),function(){ValidateForms();revalidate();$("#msg-list").hide();$("#Term").focus()}),n.stopPropagation(),!1});