$(".date").datepicker({autoclose:!0,format:{toDisplay:function(n){var t=new Date(n);return t.setDate(t.getDate()),t.toLocaleDateString()},toValue:function(n){let i=n.replace(/([0-9]{4})([0-9]{2})([0-9]{2})/,"$1-$2-$3");var t=new Date(i);return t.setDate(t.getDate()),new Date(t)}}});$("#addPostForm").submit(function(n){n.preventDefault();tinyMCE.get("msg-text").save();var t=$("#addPostForm"),i=new FormData(t[0]);return $.ajax({url:$(this).attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){var t,i;$("#event-form").length>0?(t=$("#event-form").find("form"),$("#event-topic").val(n.id),i=new FormData(t[0]),$.ajax({url:t.attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){location.href=n.url},error:function(n){console.log(n)}})):$("#poll-form").length>0?(t=$("#poll-form").find("form"),$("#poll-topic").val(n.id),i=new FormData(t[0]),$.ajax({url:t.attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){location.href=n.url},error:function(n){console.log(n)}})):location.href=n.url},error:function(n){console.log(n)}}),!1});$(document).ready(function(){$(".fig-caption").each(function(){var n=$(this);$.ajax({url:SnitzVars.baseUrl+"/PhotoAlbum/GetCaption/"+$(this).data("id"),type:"GET",success:function(t){n.html(t)}})})});$(document).on("click","#submitUpload",function(n){n.preventDefault();var t=$("#upload-form"),i=new FormData(t[0]);return $.ajax({url:SnitzVars.baseUrl+$("#upload-form").attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){var i,t;n.result&&(n.type?(alert(n.type),t="[file "+n.filesize+"]"+n.data+"[/file]",n.type===".pdf"?t="[pdf]"+n.data+"[/pdf]":(n.type===".jpg"||n.type===".png"||n.type===".jpeg"||n.type===".webp")&&(t="[img]"+n.data+"[/img]"),tinymce.activeEditor.execCommand("mceInsertContent",!1,t)):(i="[image="+n.id+"]",n.caption&&(i="[cimage="+n.id+"]"),tinymce.activeEditor.execCommand("mceInsertContent",!1,i)),$("#uploadModal").modal("hide"))},error:function(n){alert("error");$("#upload-content").html(n)},complete:function(){$("#uploadModal").modal("hide")}}),!1});$("#aFile_upload").on("change",function(){var n=(this.files[0].size/1048576).toFixed(4),t=SnitzVars.MaxFileSize;n>t&&(alert("File is too big!"),this.value="")});