$("#addPostForm").on("submit",function(n){n.preventDefault();tinyMCE.get("msg-text").save();var t=$("#addPostForm"),i=new FormData(t[0]);return $.ajax({url:$(this).attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){var t,i;if($("#event-form").length>0)t=$("#event-form").find("form"),$("#event-topic").val(n.id),i=new FormData(t[0]),$.ajax({url:t.attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){location.href=n.url},error:function(n){console.log(n)}});else if($("#poll-form").length>0)t=$("#poll-form").find("form"),$("#poll-topic").val(n.id),i=new FormData(t[0]),$.ajax({url:t.attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){location.href=n.url},error:function(n){console.log(n)}});else{if(n.url)return location.href=n.url,!1;appendAlert(n,"warning")}},error:function(n){console.log(n)}}),!1});$(document).ready(function(){$(".fig-caption").each(function(){var n=$(this);$.ajax({url:SnitzVars.baseUrl+"/PhotoAlbum/GetCaption/"+$(this).data("id"),type:"GET",success:function(t){n.html(t)}})})});$(document).on("click","#submitUpload",function(n){n.preventDefault();var t=$("#upload-form"),i=new FormData(t[0]);return $.ajax({url:$("#upload-form").attr("action"),type:"POST",data:i,contentType:!1,processData:!1,success:function(n){var i,t;n.result&&(console.log(n),n.type?(t="[file "+n.filesize+"]"+n.data+"[/file]",n.type===".pdf"?t="[pdf]"+n.data+"[/pdf]":(n.type===".jpg"||n.type===".png"||n.type===".jpeg"||n.type===".webp")&&(t="[img]"+n.data+"[/img]"),tinymce.activeEditor.execCommand("mceInsertContent",!1,t)):(i="[image="+n.id+"]",n.caption&&(i="[cimage="+n.id+"]"),tinymce.activeEditor.execCommand("mceInsertContent",!1,i)),$("#uploadModal").modal("hide"))},error:function(n){appendAlert(n,"error");$("#upload-content").html(n)},complete:function(){$("#uploadModal").modal("hide")}}),!1});$("#aFile_upload").on("change",function(){var n=(this.files[0].size/1048576).toFixed(4),t=SnitzVars.MaxFileSize;n>t&&(appendAlert("File is too big!","warning"),this.value="")});