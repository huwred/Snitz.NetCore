function revalidate(){var t=document.getElementById("reply-area"),n,i;t&&(n=t.getElementsByTagName("form"),i=n[n.length-1],$.validator.unobtrusive.parse(i))}(function(){"use strict";window.addEventListener("load",function(){ValidateForms();revalidate()},!1)})();$("#sortdir").on("change",function(){$("#defaultdays-form").submit()});$(".reply-del").on("click",function(){var n=$(this).data("id"),t=$(this).data("topicid"),i=$(this).data("archived");(async()=>{const r=await b_confirm(Snitzres.cnfDeleteReply);r&&$.post(SnitzVars.baseUrl+"/Reply/Delete",{id:n,archived:i},function(n){n.result?location.href=SnitzVars.baseUrl+"/Topic/"+t+"/?page=-1":appendAlert(n.error,"error")})})()});$(".post-del").off().on("click",function(n){var i,t,r;n.preventDefault();i=$(this).data("id");t=$(this).attr("href");console.log(t);r=$(this).data("archived");(async()=>{const n=await b_confirm(Snitzres.cnfDeleteTopic);n&&$.post(SnitzVars.baseUrl+"/Topic/Delete",{id:i,archived:r},function(n){n.result?location.href=n.url+t:appendAlert(n.error,"error")})})()});$(".lock-member").on("click",function(n){n.preventDefault();var t=$(this).data("id"),i=$(this).data("url");(async()=>{const n=await b_confirm(Snitzres.cnfLockMember);n&&$.post(i,{id:t},function(n){n.result?location.reload():appendAlert(n.error,"error")})})()});$(".bookmark-add").on("click",function(n){n.preventDefault();var i=$(this).attr("href"),t=$(this).data("id");(async()=>{const n=await b_confirm(Snitzres.cnfBookmarkPost);n&&$.post(SnitzVars.baseUrl+"/Bookmark/Create",{id:t},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})})()});$(".bookmark-del").on("click",function(n){n.preventDefault();var i=$(this).attr("href"),t=$(this).data("id");(async()=>{const n=await b_confirm(Snitzres.cnfDeleteBookmark);n&&$.post(SnitzVars.baseUrl+"/Bookmark/Delete",{id:t},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})})()});$(".post-lock").on("click",function(n){n.preventDefault();var t=$(this).data("id"),i=$(this).data("status");(async()=>{const n=await b_confirm(Snitzres.cnfToggleStatus);n&&$.post(SnitzVars.baseUrl+"/Topic/LockTopic",{id:t,status:i},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})})()});$(".post-stick").on("click",function(n){n.preventDefault();var r=$(this).attr("href"),t=$(this).data("id"),i=$(this).data("status");(async()=>{const n=await b_confirm(Snitzres.cnfToggleSticky);n&&$.post(SnitzVars.baseUrl+"/Topic/MakeSticky",{id:t,state:i},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})})()});$(".reply-quote").on("click",function(n){n.preventDefault();var t=$(this).data("id");location.href=SnitzVars.baseUrl+"/Reply/Quote/"+t});$(".post-quote").on("click",function(n){n.preventDefault();var t=$(this).data("id");location.href=SnitzVars.baseUrl+"/Topic/Quote/"+t});$(".post-reply").on("click",function(n){n.preventDefault();var t=$(this).data("id");location.href=SnitzVars.baseUrl+"/Reply/Create/"+t});$(".reply-edit").on("click",function(n){n.preventDefault();var t=$(this).data("id");archived=$(this).data("archived");location.href=SnitzVars.baseUrl+"/Reply/Edit/"+t+"?archived="+archived});$(".reply-answer").on("click",function(n){n.preventDefault();var r=$(this).attr("href"),t=$(this).data("id"),i=$(this).data("status");(async()=>{const n=await b_confirm(Snitzres.cnfMarkAnswer);n&&$.post(SnitzVars.baseUrl+"/Topic/Answered",{id:t,status:i},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})})()});$(".post-edit").on("click",function(){var n=$(this).data("id");archived=$(this).data("archived");location.href=SnitzVars.baseUrl+"/Topic/Edit/"+n+"?archived="+archived});$(".thumbs-up").on("click",function(n){n.preventDefault();var t=$(this).data("id"),i=$(this).data("replyid");$.post(SnitzVars.baseUrl+"/PostThanks/Thank",{id:t,replyid:i},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})});$(".thumbs-down").on("click",function(n){n.preventDefault();var t=$(this).data("id"),i=$(this).data("replyid");$.post(SnitzVars.baseUrl+"/PostThanks/UnThank",{id:t,replyid:i},function(n){n.result?location.reload(!0):appendAlert(n.error,"error")})});$(".thanks-list").on("mouseenter",function(){var n=$(this),t=n.data("id"),i=n.data("replyid");$.ajax({url:SnitzVars.baseUrl+"/PostThanks/Members/"+t+"?replyid="+i,"async":!1,success:function(t){n.popover({html:!0,content:t}).popover("show")},error:function(n){appendAlert(n.responseText,"warning")}})}).on("mouseleave",function(){var n=$(this);n.popover("hide")});$.fn.extend({insertAtCaret:function(n){var t=$(this)[0];if(document.selection!==undefined)this.focus(),sel=document.selection.createRange(),sel.text=n,this.focus();else if(t.selectionStart!=undefined){var i=t.selectionStart,r=t.selectionEnd,u=t.scrollTop;t.value=t.value.substring(0,i)+n+t.value.substring(r,t.value.length);this.focus();this.selectionStart=i+n.length;this.selectionEnd=i+n.length;this.scrollTop=u}else this.val(this.val()+n),this.focus()},surroundSelection:function(n,t){var o="",i=$(this)[0],f;if(document.selection!=undefined)this.focus(),f=document.selection.createRange(),f.text=n+f.text+t,this.focus();else if(i.selectionStart!=undefined){var r=i.selectionStart,u=i.selectionEnd,s=i.scrollTop,e=n+t;r!==u?(o=i.value.substring(r,u),i.value=i.value.substring(0,r)+n+o+t+i.value.substring(u,i.value.length)):i.value=i.value.substring(0,r)+e+i.value.substring(u,i.value.length);i.selectionStart=r+e.length;i.selectionEnd=r+e.length;i.scrollTop=s}},replaceSelection:function(n){var e="",t=$(this)[0],u;if(document.selection!=undefined)this.focus(),u=document.selection.createRange(),u.text=n,this.focus();else if(t.selectionStart!=undefined){t.focus();var i=t.selectionStart,r=t.selectionEnd,o=t.scrollTop,f=n;i!=r?(e=t.value.substring(i,r),t.value=t.value.substring(0,i)+n+t.value.substring(r,t.value.length)):t.value=t.value.substring(0,i)+f+t.value.substring(r,t.value.length);t.selectionStart=i;t.selectionEnd=i+f.length;t.scrollTop=o}},getSelection:function(){var r="",n=$(this)[0],u;if(document.selection!=undefined)this.focus(),u=document.selection.createRange(),r=u.text,u.text="",this.focus();else if(n.selectionStart!=undefined){n.focus();var t=n.selectionStart,i=n.selectionEnd,e=n.scrollTop,f="";t!=i?(r=n.value.substring(t,i),n.value=n.value.substring(0,t)+n.value.substring(i,n.value.length)):n.value=n.value.substring(0,t)+f+n.value.substring(i,n.value.length);n.selectionStart=t+f.length;n.selectionEnd=t+f.length;n.scrollTop=e}return r},selectRange:function(n,t){return t||(t=n),this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(n,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}})}});